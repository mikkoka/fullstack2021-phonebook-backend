(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(15),o=n.n(c),u=n(6),i=n(3),a=n(2),d=n(4),s=n.n(d),l="http://localhost:3001/api/persons",b={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},post:function(e){return s.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return s.a.delete("".concat(l,"/").concat(e))},updatePerson:function(e){var t=e.id;return s.a.put("".concat(l,"/").concat(t),e).then((function(e){return e.data}))}},j=function(e){var t=e.filterString,n=e.onFilterStringChange;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:t,onChange:n})]})},f=function(e){var t=e.addNewEntry,n=e.newName,c=e.newNumber,o=e.onNameInput,u=e.onNumberInput;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Add new number"}),Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:o})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:c,onChange:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})},h=function(e){var t=e.filterString,n=e.filterPersons,c=e.deleteEntry;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),n(t).map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number," ",Object(r.jsx)("button",{onClick:function(){return c(e.id,e.name)},children:"Delete"})]},e.name)}))]})},m=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),d=Object(i.a)(o,2),s=d[0],l=d[1],m=Object(a.useState)(""),O=Object(i.a)(m,2),p=O[0],g=O[1],v=Object(a.useState)(""),x=Object(i.a)(v,2),w=x[0],y=x[1],S=Object(a.useState)(null),N=Object(i.a)(S,2),C=N[0],k=N[1],E=Object(a.useState)({}),P=Object(i.a)(E,2),I=P[0],A=P[1],B={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},R={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},z=function(e,t){k(e),A(t),setTimeout((function(){k(""),A(null)}),5e3)};Object(a.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),C?Object(r.jsx)("p",{style:I,children:C}):Object(r.jsx)("div",{}),Object(r.jsx)(j,{filterString:w,onFilterStringChange:function(e){y(e.target.value)}}),Object(r.jsx)(f,{addNewEntry:function(e){e.preventDefault();var t=n.findIndex((function(e){return e.name===s}));if(t>-1){window.confirm("".concat(s," is already added to phonebook. Replace old number with new one?"))&&function(e){var t=n[e],r=Object(u.a)(Object(u.a)({},t),{},{number:p});b.updatePerson(r).then((function(e){c(n.map((function(t){return t.name!==e.name?t:e}))),l(""),g(""),z("Entry for ".concat(r.name," successfully updated"),B)}))}(t)}else{var r={name:s,number:p};b.post(r).then((function(e){c(n.concat(e)),l(""),g(""),z("".concat(e.name," successfully added"),B)}))}},newName:s,newNumber:p,onNameInput:function(e){return l(e.target.value)},onNumberInput:function(e){return g(e.target.value)}}),Object(r.jsx)(h,{filterPersons:function(e){return n.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))},filterString:w,deleteEntry:function(e,t){window.confirm("Confirm deletion of entry for ".concat(t,"?"))&&b.deletePerson(e).then((function(){c(n.filter((function(t){return t.id!==e}))),z("".concat(t," successfully deleted"),B)})).catch((function(e){return z("".concat(t," has already been deleted"),R)}))}})]})};n(39);o.a.render(Object(r.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.fa6e5768.chunk.js.map