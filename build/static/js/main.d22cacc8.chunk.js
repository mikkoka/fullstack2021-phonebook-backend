(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(15),o=n.n(c),u=n(6),a=n(3),i=n(2),s=n(4),d=n.n(s),l="http://localhost:3001/api/persons",b={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},post:function(e){return d.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(l,"/").concat(e))},updatePerson:function(e){var t=e.id;return d.a.put("".concat(l,"/").concat(t),e).then((function(e){return e.data}))}},f=function(e){var t=e.filterString,n=e.onFilterStringChange;return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.addNewEntry,n=e.newName,c=e.newNumber,o=e.onNameInput,u=e.onNumberInput;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Add new number"}),Object(r.jsxs)("form",{onSubmit:t,children:["name: ",Object(r.jsx)("input",{value:n,onChange:o}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{value:c,onChange:u}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",children:"add"})]})]})},h=function(e){var t=e.filterString,n=e.filterPersons,c=e.deleteEntry;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),n(t).map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number," ",Object(r.jsx)("button",{onClick:function(){return c(e.id,e.name)},children:"Delete"})]},e.name)}))]})},m=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(i.useState)(""),s=Object(a.a)(o,2),d=s[0],l=s[1],m=Object(i.useState)(""),O=Object(a.a)(m,2),p=O[0],g=O[1],x=Object(i.useState)(""),v=Object(a.a)(x,2),w=v[0],y=v[1],S=Object(i.useState)(null),N=Object(a.a)(S,2),C=N[0],k=N[1],E=Object(i.useState)({}),P=Object(a.a)(E,2),I=P[0],A=P[1],B={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},R={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},z=function(e,t){k(e),A(t),setTimeout((function(){k(""),A(null)}),5e3)};Object(i.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),C?Object(r.jsx)("p",{style:I,children:C}):Object(r.jsx)("div",{}),Object(r.jsx)(f,{filterString:w,onFilterStringChange:function(e){y(e.target.value)}}),Object(r.jsx)(j,{addNewEntry:function(e){e.preventDefault();var t=n.findIndex((function(e){return e.name===d}));if(t>-1){window.confirm("".concat(d," is already added to phonebook. Replace old number with new one?"))&&function(e){var t=n[e],r=Object(u.a)(Object(u.a)({},t),{},{number:p});b.updatePerson(r).then((function(e){c(n.map((function(t){return t.name!==e.name?t:e}))),l(""),g(""),z("Entry for ".concat(r.name," successfully updated"),B)}))}(t)}else{var r={name:d,number:p};b.post(r).then((function(e){c(n.concat(e)),z("".concat(e.name," successfully added"),B)})).catch((function(e){z("".concat(e.response.data),R)})),l(""),g("")}},newName:d,newNumber:p,onNameInput:function(e){return l(e.target.value)},onNumberInput:function(e){return g(e.target.value)}}),Object(r.jsx)(h,{filterPersons:function(e){return n.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))},filterString:w,deleteEntry:function(e,t){window.confirm("Confirm deletion of entry for ".concat(t,"?"))&&b.deletePerson(e).then((function(){c(n.filter((function(t){return t.id!==e}))),z("".concat(t," successfully deleted"),B)})).catch((function(e){return z("".concat(t," has already been deleted"),R)}))}})]})};n(39);o.a.render(Object(r.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d22cacc8.chunk.js.map